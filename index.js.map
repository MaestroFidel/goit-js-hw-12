{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const createGalleryCard = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n  <a href=\"${imgInfo.largeImageURL}\">\n  <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n  </a>\n  <ul class=\"comments\">\n  <li class=\"com\">likes: ${imgInfo.likes}</li>\n  <li class=\"com\">views: ${imgInfo.views}</li>\n  <li class=\"com\">comments: ${imgInfo.comments}</li>\n  <li class=\"com\">downloads: ${imgInfo.downloads}</li>\n  </ul>\n  </li>\n  `;\n\n};\n\nexport const displayPhotos = (photos, galleryImg, lightbox) => {\n  const galleryMarkup = photos.map(createGalleryCard).join('');\n  galleryImg.innerHTML = galleryMarkup;\n  lightbox.refresh();\n};\n\n\n\n\n","import axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45481518-557ec69fe97012c17356df52c';\n\nexport const fetchPhotos = async(searchedQuery, page) => {\n\nconst axiosParams = {\nparams: {\n    q: searchedQuery,\n   orientation: 'horizontal',\n   per_page: 20,\n   key: API_KEY,\n   image_type: 'photo',\n   safesearch: true,\n   page,\n   per_page: 15,\n\n},   \n};\n\nconst {data} = await axios.get(`${BASE_URL}`, axiosParams);\nreturn data;\n};","\n// import { displayPhotos } from \"./js/render-functions\";\n// import { fetchPhotos } from \"./js/pixabay-api\";\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n// import SimpleLightbox from \"simplelightbox\";\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// const searchImg = document.querySelector('.js-search-form');\n// const galleryImg = document.querySelector('.js-gallery');\n// const waitLoader = document.querySelector('.js-loader');\n// const moreButton = document.querySelector('.more-button');\n\n// let currentPage = 1;\n// let searchValue = \"\";\n\n\n// const onSearchFormSubmit = async event => {\n//     event.preventDefault();\n//     searchValue = searchImg.elements.user_query.value.trim();\n//     if (searchValue === \"\") {\n//             iziToast.error({\n//               title: \"Error\",\n//               message: \"Please fill out the form\",\n//               position: 'topRight',\n//               timeout: 3000\n//             });\n//             return;\n//           }\n//           currentPage = 1;\n\n//           waitLoader.classList.remove('loader-hidden');\n//     try {\n//         const data = await fetchPhotos(searchValue);\n//         if (data.hits.length === 0) {\n//                 iziToast.warning({\n//                   title: \"No results\",\n//                   message: \"Sorry, there are no images your search query. Please try again.\",\n//                   position: 'topLeft',\n//                 });\n//                 galleryImg.innerHTML = '';\n//                 searchImg.reset();\n//                 return;\n//               };\n//                  if (data.totalHits > 15) {\n//                 moreButton.classList.remove('more-button-hidden');\n//               }\n\n//               displayPhotos(data.hits, galleryImg, new SimpleLightbox('.gallery-card a')); \n\n//     }\n//     catch (err) {\n//         iziToast.error ({\n//             title: \"Error\",\n//             message:\n//             'Something wrong. Please, try later'\n//         })\n//     }\n//         finally {\n        \n//                 waitLoader.classList.add('loader-hidden');\n//             }; \n//         };   \n\n//         const loadMoreBtn = async () => {\n//             currentPage++;\n//             waitLoader.classList.remove('loader-hidden');\n//     try {\n//         const data = await fetchPhotos(searchValue);\n        \n//               displayPhotos(data.hits, galleryImg, new SimpleLightbox('.gallery-card a')); \n\n//     }\n//     catch (err) {\n//         iziToast.error ({\n//             title: \"Error\",\n//             message:\n//             'Something wrong. Please, try later'\n//         })\n//     }\n//         finally {\n//                         waitLoader.classList.add('loader-hidden');\n//             }; \n//         }\n\n// searchImg.addEventListener('submit', onSearchFormSubmit);\n\n\n// import { fetchPhotos } from './pixabay-api';\n// import { displayPhotos } from './render-function';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\n\nimport { displayPhotos } from \"./js/render-functions\";\nimport { fetchPhotos } from \"./js/pixabay-api\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet page = 1;\nlet searchValue = '';\nconst searchForm = document.querySelector('.js-search-form');\nconst galleryImg = document.querySelector('.js-gallery');\nconst moreButton = document.querySelector('.more-button');\nconst waitLoader = document.querySelector('.js-loader');\n\nconst lightbox = new SimpleLightbox('.gallery-card a');\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  searchValue = event.target.elements.user_query.value.trim();\n  if (!searchValue) return;\n\n  page = 1;\n  moreButton.classList.add('more-button-hidden');\n  galleryImg.innerHTML = '';\n  waitLoader.classList.remove('loader-hidden');\n\n  try {\n    const data = await fetchPhotos(searchValue, page);\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: \"No results\",\n        message: \"Sorry, there are no images matching your search query. Please try again.\",\n        position: 'topLeft',\n      });\n      searchForm.reset();\n      return;\n    }\n\n    displayPhotos(data.hits, galleryImg, lightbox);\n    if (data.totalHits > 15) {\n      moreButton.classList.remove('more-button-hidden');\n    }\n  } catch (err) {\n    iziToast.error({\n      title: \"Error\",\n      message: 'Something went wrong. Please, try again later.'\n    });\n  } finally {\n    waitLoader.classList.add('loader-hidden');\n  }\n});\n\nmoreButton.addEventListener('click', async () => {\n  page += 1;\n  waitLoader.classList.remove('loader-hidden');\n\n  try {\n    const data = await fetchPhotos(searchValue, page);\n    if (data.hits.length === 0 || page * 15 >= data.totalHits) {\n      iziToast.info({\n        title: \"End of results\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topLeft',\n      });\n      moreButton.classList.add('more-button-hidden');\n      return;\n    }\n\n//     displayPhotos(data.hits, galleryImg, lightbox);\n//     const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n//     window.scrollBy({\n//       top: cardHeight * 2,\n//       behavior: 'smooth',\n//     });\n//   } catch (err) {\n//     iziToast.error({\n//       title: \"Error\",\n//       message: 'Something went wrong. Please, try again later.'\n//     });\n//   } finally {\n//     waitLoader.classList.add('loader-hidden');\n//   }\n// });\n\nconst galleryMarkup = data.hits.map(createGalleryCard).join('');\ngalleryImg.insertAdjacentHTML('beforeend', galleryMarkup);\nlightbox.refresh();\n\n// Прокручуємо сторінку на дві висоти картки галереї\nconst { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: 'smooth',\n});\n} catch (err) {\niziToast.error({\n  title: \"Error\",\n  message: 'Something went wrong. Please, try again later.'\n});\n} finally {\nwaitLoader.classList.add('loader-hidden');\n}\n});\n"],"names":["createGalleryCard","imgInfo","displayPhotos","photos","galleryImg","lightbox","galleryMarkup","BASE_URL","API_KEY","fetchPhotos","searchedQuery","page","axiosParams","data","axios","searchValue","searchForm","moreButton","waitLoader","SimpleLightbox","event","iziToast","cardHeight"],"mappings":"owBAKO,MAAMA,EAAoBC,GACxB;AAAA;AAAA,aAEIA,EAAQ,aAAa;AAAA,kCACAA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,2BAGjDA,EAAQ,KAAK;AAAA,2BACbA,EAAQ,KAAK;AAAA,8BACVA,EAAQ,QAAQ;AAAA,+BACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,IAOnCC,EAAgB,CAACC,EAAQC,EAAYC,IAAa,CAC7D,MAAMC,EAAgBH,EAAO,IAAIH,CAAiB,EAAE,KAAK,EAAE,EAC3DI,EAAW,UAAYE,EACvBD,EAAS,QAAO,CAClB,ECxBME,EAAW,2BACXC,EAAU,qCAEHC,EAAc,MAAMC,EAAeC,IAAS,CAEzD,MAAMC,EAAc,CACpB,OAAQ,CACJ,EAAGF,EACJ,YAAa,aACb,SAAU,GACV,IAAKF,EACL,WAAY,QACZ,WAAY,GACZ,KAAAG,EACA,SAAU,EAEb,CACA,EAEM,CAAC,KAAAE,CAAI,EAAI,MAAMC,EAAM,IAAI,GAAGP,CAAQ,GAAIK,CAAW,EACzD,OAAOC,CACP,ECgFA,IAAIF,EAAO,EACPI,EAAc,GAClB,MAAMC,EAAa,SAAS,cAAc,iBAAiB,EACrDZ,EAAa,SAAS,cAAc,aAAa,EACjDa,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,YAAY,EAEhDb,EAAW,IAAIc,EAAe,iBAAiB,EAErDH,EAAW,iBAAiB,SAAU,MAAOI,GAAU,CAGrD,GAFAA,EAAM,eAAc,EACpBL,EAAcK,EAAM,OAAO,SAAS,WAAW,MAAM,OACjD,EAACL,EAEL,CAAAJ,EAAO,EACPM,EAAW,UAAU,IAAI,oBAAoB,EAC7Cb,EAAW,UAAY,GACvBc,EAAW,UAAU,OAAO,eAAe,EAE3C,GAAI,CACF,MAAML,EAAO,MAAMJ,EAAYM,EAAaJ,CAAI,EAChD,GAAIE,EAAK,KAAK,SAAW,EAAG,CAC1BQ,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,2EACT,SAAU,SAClB,CAAO,EACDL,EAAW,MAAK,EAChB,MACD,CAEDd,EAAcW,EAAK,KAAMT,EAAYC,CAAQ,EACzCQ,EAAK,UAAY,IACnBI,EAAW,UAAU,OAAO,oBAAoB,CAEnD,MAAa,CACZI,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACf,CAAK,CACL,QAAY,CACRH,EAAW,UAAU,IAAI,eAAe,CACzC,EACH,CAAC,EAEDD,EAAW,iBAAiB,QAAS,SAAY,CAC/CN,GAAQ,EACRO,EAAW,UAAU,OAAO,eAAe,EAE3C,GAAI,CACF,MAAML,EAAO,MAAMJ,EAAYM,EAAaJ,CAAI,EAChD,GAAIE,EAAK,KAAK,SAAW,GAAKF,EAAO,IAAME,EAAK,UAAW,CACzDQ,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,6DACT,SAAU,SAClB,CAAO,EACDJ,EAAW,UAAU,IAAI,oBAAoB,EAC7C,MACD,CAkBL,MAAMX,EAAgBO,EAAK,KAAK,IAAI,iBAAiB,EAAE,KAAK,EAAE,EAC9DT,EAAW,mBAAmB,YAAaE,CAAa,EACxDD,EAAS,QAAO,EAGhB,KAAM,CAAE,OAAQiB,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACZ,CAAC,CACD,MAAc,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACX,CAAC,CACD,QAAU,CACVH,EAAW,UAAU,IAAI,eAAe,CACxC,CACA,CAAC"}