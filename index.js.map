{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n\n\nexport const createGalleryCard = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n  <a href=\"${imgInfo.largeImageURL}\">\n  <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n  </a>\n  <ul class=\"comments\">\n  <li class=\"com\">likes: ${imgInfo.likes}</li>\n  <li class=\"com\">views: ${imgInfo.views}</li>\n  <li class=\"com\">comments: ${imgInfo.comments}</li>\n  <li class=\"com\">downloads: ${imgInfo.downloads}</li>\n  </ul>\n  </li>\n  `;\n\n};\n\n//test//\n\n\n\n\n","import axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45481518-557ec69fe97012c17356df52c';\n\nexport const fetchPhotos = async(searchedQuery, page) => {\n\nconst axiosParams = {\nparams: {\n    q: searchedQuery,\n   orientation: 'horizontal',\n   per_page: 20,\n   key: API_KEY,\n   image_type: 'photo',\n   safesearch: true,\n   page,\n   per_page: 15,\n\n},   \n};\n\nconst {data} = await axios.get(`${BASE_URL}`, axiosParams);\nreturn data;\n};","import { createGalleryCard } from \"./js/render-functions\";\nimport { fetchPhotos } from \"./js/pixabay-api\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchImg = document.querySelector('.js-search-form');\nconst galleryImg = document.querySelector('.js-gallery');\nconst waitLoader = document.querySelector('.js-loader');\nconst moreButton = document.querySelector('.more-button');\n\nlet currentPage = 1;\nlet searchValue = \"\";\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captiondata: 'alt',\n  captionDelay: 250,\n});\n\nconst onSearchFormSubmit = async event => {\n    event.preventDefault();\n\n    searchValue = searchImg.elements.user_query.value.trim();\n    if (searchValue === \"\") {\n            iziToast.error({\n              title: \"Error\",\n              message: \"Please fill out the form\",\n              position: 'topRight',\n              timeout: 3000\n            });\n            return;\n          }\n          currentPage = 1;\n\n        \n          waitLoader.classList.remove('loader-hidden');\n    try {\n        const data = await fetchPhotos(searchValue, currentPage);\n        if (data.hits.length === 0) {\n                iziToast.warning({\n                  title: \"No results\",\n                  message: \"Sorry, there are no images your search query. Please try again.\",\n                  position: 'topLeft',\n                });\n                galleryImg.innerHTML = '';\n               \n                moreButton.classList.add('more-button-hidden');\n                return;\n              };\n            \n             const galleryCardTemplate = data.hits\n              .map(imgDetails => createGalleryCard(imgDetails))\n              .join('');\n              galleryImg.innerHTML = galleryCardTemplate;\n\n              // scrSmooth();\n\n              lightbox.refresh();\n              searchImg.reset();\n\n              if (data.totalHits > 15) {\n                moreButton.classList.remove('more-button-hidden');\n              }\n\n\n    }\n    catch (err) {\n        iziToast.error ({\n            title: \"Error\",\n            message:\n            'Something wrong. Please, try later'\n        })\n    }\n        finally {\n             waitLoader.classList.add('loader-hidden');\n            }; \n        };   \n\n const onMoreButton = async () => {\ncurrentPage++;\nwaitLoader.classList.remove('loader-hidden');\ntry {\n    const data = await fetchPhotos(searchValue, currentPage);\n                        \n         const galleryCardTemplate = data.hits\n          .map(imgDetails => createGalleryCard(imgDetails))\n          .join('');\n          galleryImg.insertAdjacentHTML (\"beforeend\", galleryCardTemplate);\n\n          scrSmooth();\n\n          lightbox.refresh();\n        \n          if (Math.ceil(data.totalHits / 15) === currentPage) {\n            moreButton.classList.add('more-button-hidden');\n            iziToast.info({\n              message: \"We're sorry, but you've reached the end of search results.\",\n              position: \"topRight\"\n            })\n          }\n}\ncatch (err) {\n    iziToast.error ({\n        title: \"Error\",\n        message:\n        'Something wrong. Please, try later'\n    })\n}\n    finally {\n         waitLoader.classList.add('loader-hidden');\n        }; \n };\n\nconst scrSmooth = () => {\n  const { height } = galleryImg.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n     behavior: 'smooth',\n  });\n};\nmoreButton.addEventListener('click', onMoreButton)\nsearchImg.addEventListener('submit', onSearchFormSubmit);\n\n\n\n\n\n\n\n"],"names":["createGalleryCard","imgInfo","BASE_URL","API_KEY","fetchPhotos","searchedQuery","page","axiosParams","data","axios","searchImg","galleryImg","waitLoader","moreButton","currentPage","searchValue","lightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","galleryCardTemplate","imgDetails","onMoreButton","scrSmooth","height"],"mappings":"+vBAGO,MAAMA,EAAoBC,GACxB;AAAA;AAAA,aAEIA,EAAQ,aAAa;AAAA,kCACAA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,2BAGjDA,EAAQ,KAAK;AAAA,2BACbA,EAAQ,KAAK;AAAA,8BACVA,EAAQ,QAAQ;AAAA,+BACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,ICX1CC,EAAW,2BACXC,EAAU,qCAEHC,EAAc,MAAMC,EAAeC,IAAS,CAEzD,MAAMC,EAAc,CACpB,OAAQ,CACJ,EAAGF,EACJ,YAAa,aACb,SAAU,GACV,IAAKF,EACL,WAAY,QACZ,WAAY,GACZ,KAAAG,EACA,SAAU,EAEb,CACA,EAEM,CAAC,KAAAE,CAAI,EAAI,MAAMC,EAAM,IAAI,GAAGP,CAAQ,GAAIK,CAAW,EACzD,OAAOC,CACP,EChBME,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAa,SAAS,cAAc,YAAY,EAChDC,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIC,EAAc,EACdC,EAAc,GAElB,MAAMC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,YAAa,MACb,aAAc,GAChB,CAAC,EAEKC,EAAqB,MAAMC,GAAS,CAItC,GAHAA,EAAM,eAAc,EAEpBJ,EAAcL,EAAU,SAAS,WAAW,MAAM,KAAI,EAClDK,IAAgB,GAAI,CAChBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2BACT,SAAU,WACV,QAAS,GACvB,CAAa,EACD,MACD,CACDN,EAAc,EAGdF,EAAW,UAAU,OAAO,eAAe,EACjD,GAAI,CACA,MAAMJ,EAAO,MAAMJ,EAAYW,EAAaD,CAAW,EACvD,GAAIN,EAAK,KAAK,SAAW,EAAG,CACpBY,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,kEACT,SAAU,SAC5B,CAAiB,EACDT,EAAW,UAAY,GAEvBE,EAAW,UAAU,IAAI,oBAAoB,EAC7C,MAChB,CAEa,MAAMQ,EAAsBb,EAAK,KAC/B,IAAIc,GAActB,EAAkBsB,CAAU,CAAC,EAC/C,KAAK,EAAE,EACRX,EAAW,UAAYU,EAIvBL,EAAS,QAAO,EAChBN,EAAU,MAAK,EAEXF,EAAK,UAAY,IACnBK,EAAW,UAAU,OAAO,oBAAoB,CAI3D,MACW,CACRO,EAAS,MAAO,CACZ,MAAO,QACP,QACA,oCACZ,CAAS,CACJ,QACW,CACHR,EAAW,UAAU,IAAI,eAAe,CACrD,GAGOW,EAAe,SAAY,CAClCT,IACAF,EAAW,UAAU,OAAO,eAAe,EAC3C,GAAI,CACA,MAAMJ,EAAO,MAAMJ,EAAYW,EAAaD,CAAW,EAE5CO,EAAsBb,EAAK,KAC/B,IAAIc,GAActB,EAAkBsB,CAAU,CAAC,EAC/C,KAAK,EAAE,EACRX,EAAW,mBAAoB,YAAaU,CAAmB,EAE/DG,IAEAR,EAAS,QAAO,EAEZ,KAAK,KAAKR,EAAK,UAAY,EAAE,IAAMM,IACrCD,EAAW,UAAU,IAAI,oBAAoB,EAC7CO,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACxB,CAAa,EAEb,MACY,CACRA,EAAS,MAAO,CACZ,MAAO,QACP,QACA,oCACR,CAAK,CACL,QACY,CACHR,EAAW,UAAU,IAAI,eAAe,CACjD,GAGMY,EAAY,IAAM,CACtB,KAAM,CAAE,OAAAC,CAAQ,EAAGd,EAAW,kBAAkB,sBAAqB,EACrE,OAAO,SAAS,CACd,IAAKc,EAAS,EACb,SAAU,QACf,CAAG,CACH,EACAZ,EAAW,iBAAiB,QAASU,CAAY,EACjDb,EAAU,iBAAiB,SAAUQ,CAAkB"}